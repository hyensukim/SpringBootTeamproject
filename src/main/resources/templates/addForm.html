<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link th:href="@{../static/css/css.css}" href="../static/css/css.css" rel="stylesheet">
    <script src="https://cdn.ckeditor.com/ckeditor5/39.0.2/classic/ckeditor.js"></script>
    <title>글 작성</title>
    <!-- CKEditor 크기 조절을 위한 CSS -->
    <style>
        #editor {
            width: 800px; /* 너비 설정 */
            height: 500px; /* 높이 설정 */
        }
    </style>
</head>
<body>
<div class="board_wrap">

    <!-- 게시판 선택 폼 -->
    <form th:action="@{/posts/create}" th:object="${postDto}" method="POST" id="postForm">

        <select name="bNo" th:field="*{bNo}" required>
            <!-- Iterate through a list of boards to populate the dropdown -->
            <p>게시판</p></br>
            <option value="" disabled selected>게시판을 선택하세요</option>
            <option th:each="board : ${boards}" th:value="${board.bNo}" th:text="${board.bName}"></option>
        </select>

        <!-- 제목 입력란 -->
        <!--        <input type="text" name="pTitle" placeholder="제목을 입력하세요." th:field="${pTitle}"> <input/>-->
        <p>제목</p>
        <input type="text" id= "pTitle" name="pTitle" placeholder="제목을 입력하세요."/></br>

        <!-- 본문 입력란 -->
<!--        <input type="text" name="pContent" placeholder="제목을 입력하세요." th:field="${pContent}"> <input/>-->
        <p>내용</p>
        <textarea type="text" id= "pContent" name="pContent" placeholder="내용을 입력하세요."></textarea>

        <!-- 등록 버튼 -->
        <input type="submit" value="등록"/>

        <!-- 취소 버튼, 컨트롤러의 "/posts/all" 경로에 맞춰 href 속성 수정 -->
        <a href="/posts/posts/all" th:href="@{/posts/posts/all}">취소</a>

    </form>

    <!-- ckEditor 에러 처리 메서드, 폼 제출 이벤트 리스너 삭제 -->
    <script>
        ClassicEditor
            .create(document.querySelector('#editor'))
            .catch(error => {
                console.error(error);
            });
    </script>
    <script>
        // 폼 제출 시 실행되는 함수
        function updateTextArea() {
            const editorData = document.querySelector('#editor').getData();
            document.querySelector('#pContent').value = editorData;
        }

        // 폼 제출 버튼 클릭 시 updateTextArea 함수 호출
        const submitButton = document.querySelector('input[type="submit"]');
        submitButton.addEventListener('click', updateTextArea);
    </script>
</div>
</body>
</html>