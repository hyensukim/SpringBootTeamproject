<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <link th:href="@{../../static/css/styles.css}"
          href="../static/css/styles.css" rel="stylesheet">

    <title th:text="${pageTitle}"></title>
</head>
<body>
<!-- 네비게이션 바(헤더) -->
<nav th:replace="~{/outlines/nav :: common}"></nav>
<!--<nav class="navbar navbar-expand-lg navbar-dark bg-dark">-->
<!--    <div class="container">-->
<!--        <a class="navbar-brand" href="index.html" th:href="@{}"><img class = "logo" src = "../static/image/Logo.png" th:src="@{이미지 경로}" />Shoot for Money</a>-->
<!--        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"-->
<!--                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span>-->
<!--        </button>-->
<!--        <div class="collapse navbar-collapse" id="navbarSupportedContent">-->
<!--            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">-->
<!--                <li class="nav-item"><a class="nav-link" href="post.html" th:href="@{#}">커뮤니티</a></li>-->
<!--                <li class="nav-item"><a class="nav-link" href="#!" th:href="@{#}">경기 결과</a></li>-->
<!--                <li class="nav-item"><a class="nav-link" href="prediction.html" th:href="@{#}">승부 예측</a></li>-->
<!--                <li class="nav-item"><a class="nav-link" href="#!" th:href="@{#}">로그인</a></li>-->
<!--                <li class="nav-item"><a class="nav-link" href="#!" th:href="@{#}">마이페이지</a></li>-->
<!--            </ul>-->
<!--        </div>-->
<!--    </div>-->
<!--</nav>-->

<main>
    <header class="prediction-hd">
        <h2 class="fw-bolder mb-1">경기 상세&배팅</h2>
    </header>

    <div class = "scroll3">
        <table class = "recentgame2">
            <thead>
            <tr>
                <th>경기번호</th>
                <th>경기일시</th>
                <th>대회</th>
                <th>홈팀</th>
                <th>원정팀</th>
                <th>배당률</th>
                <th>배팅</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td th:text="${game.gNo}"></td>
                <td th:text="${game.gStartTime}"></td>
                <td th:text="${game.gLeague}"></td>
                <td th:text="${game.gHomeTeam}"></td>
                <td th:text="${game.gAwayTeam}"></td>
                <td>
                    <div class="formBox">
                        <div class="btnChkBox v2">
                            <button type="button" class="betBtn">
                                <span>승</span><br/><span class="db" th:text="${ratios[0]}"></span>
                            </button>
                            <button type="button" class="betBtn">
                                <span>무</span><br/><span class="db" th:text="${ratios[1]}"></span>
                            </button>
                            <button type="button" class="betBtn">
                                <span>패</span><br/><span class="db" th:text="${ratios[2]}"></span>
                            </button>
                        </div>
                    </div>
                </td>
            </tr>

            <!-- 경기 점수 -->
            <tr class="score">
                <td colspan="2" th:text="${game.getGHomeTeam()}"></td>
                <td colspan="3"><span>0</span> : <span>0</span></td>
                <td colspan="2" th:text="${game.getGAwayTeam()}"></td>
            </tr>

            <!-- 승무패 예측 & 고른팀 & 배당 -->
            <tr class="score2">
                <td colspan="7">
                    <div class="formBox">
                        <th:block th:href="@{/list/{matchId}(matchId=${game.matchId})}">
                            <div class="btnChkBox v2">
                                <button type="button" class="betBtn2" onclick="highlight(this) ; selectOutcome('WIN')">
                                    <span>승</span><br/><span class="db" th:text="${ratios[0]}"></span>
                                </button>
                                <button type="button" class="betBtn2" onclick="highlight(this) ; selectOutcome('DRAW')">
                                    <span>무</span><br/><span class="db" th:text="${ratios[1]}"></span>
                                </button>
                                <button type="button" class="betBtn2" onclick="highlight(this) ; selectOutcome('LOSE')">
                                    <span>패</span><br/><span class="db" th:text="${ratios[2]}"></span>
                                </button>
                            </div>
                        </th:block>
                    </div>
                </td>
            </tr>

            <tr class="score2">
                <td colspan="2">
                    <form th:action="@{/bet/placebet}" method="post">
                        <input type='hidden' name='gNo' th:value="${gNo}">
                        <input type='hidden' name='matchId' th:value="${matchId}">
                        <input type='hidden' id='outcome' name='expect' th:value="${expect}">
                        <input type="number" name="btMoney" th:value="${btMoney}">
                        <span>만 유로</span>
                        <button type="submit">
                            <span>배팅</span>
                        </button>
                    </form>
                </td>
                <td colspan="2">
                    배팅 가능금액 : <span th:text="${totalEuro}"></span> (만 유로)
                </td>
<!--                <td colspan="3">-->
<!--                    예상 적중금액 : <span th:text="${}">0</span> (만 유로)-->
<!--                </td>-->
            </tr>
            </tbody>
        </table>
    </div>


    <div class="col-lg-4">
        <!-- Categories widget-->
        <div class="card mb-4">
            <div class="card-header">리그 별 승부예측</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-sm-6">
                        <ul class="list-unstyled mb-0">
                            <li><a th:href="@{/list/unstarted/entirelist}">전체 목록 보기</a></li>
                            <li><a th:href="@{/list/unstarted/epl}">EPL</a></li>
                            <li><a th:href="@{/list/unstarted/laliga}">LaLiga</a></li>
                            <li><a th:href="@{/list/unstarted/bundes}">Bundesliga</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- 푸터 -->
<footer th:replace="~{/outlines/footer :: common}"></footer>
<footer class="py-5 bg-dark">
    <div class="container">
        <p class="m-0 text-center text-white">2023 Ait - Betting Site Prj</p>
    </div>
</footer>


<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="js/scripts.js"></script>
<!-- Button -->
<script type='text/javascript'>
    // When the DOM is ready...
    document.addEventListener('DOMContentLoaded', function() {
        // Function to highlight a button and un-highlight others
        window.highlight = function(button) {
            // Get all buttons with the 'betBtn2' class
            var buttons = document.querySelectorAll('.betBtn2');

            // For each button...
            for (var i = 0; i < buttons.length; i++) {
                // If this is the clicked button, add the 'highlight' class
                if (buttons[i] === button) {
                    buttons[i].classList.add('highlight');
                }
                // Otherwise, remove the 'highlight' class
                else {
                    buttons[i].classList.remove('highlight');
                }
            }
        };

        window.selectOutcome = function(outcome) {
            console.log("Select outcome function called with outcome: " + outcome);

            // Set the value of the hidden input field to the selected outcome
            document.getElementById('outcome').value = outcome;
        };
    });
</script>

</body>
</html>