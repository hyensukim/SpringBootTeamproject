<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/admin/main}">

<main layout:fragment="common">

    <h2>게시판 조회</h2>

    <table class="table text-center">
        <thead>
        <tr>
            <th>게시글 번호</th>
            <th>회원 ID</th>
            <th>별명</th>
            <th>게시판</th>
            <th>제목</th>
            <th>작성일</th>
            <th>수정일</th>
        </tr>
        </thead>

        <!-- 게시판 내용 반복 -->
        <tr th:each="post : ${posts}">
            <td th:text="${post.pNo}"></td>
            <td th:text="${post.member.mId}"></td>
            <td th:text="${post.member.mNickName}"></td>
            <td th:text="${post.board.bName}"></td>
            <td><a th:href="@{'/admin/post/' + ${post.pNo}}" th:text="${post.pTitle}"></a></td>
            <td th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm:ss')}"></td>
            <td th:text="${#temporals.format(post.updatedAt, 'yyyy-MM-dd HH:mm:ss')}"></td>

            <!-- 게시글 삭제 -->
            <td>
                <form th:action="@{'/admin/post/' + ${post.pNo}}" method="post" onsubmit="return confirm('게시글 삭제를 진행하면 모든 내용과 댓글이 영구적으로 사라집니다. 계속 진행하시겠습니까??')">
                    <input type="hidden" name="_method" value="delete"/>
                    <button type="submit">게시글 삭제</button>
                </form>
            </td>

        </tr>
    </table>

    <!-- 게시글 조회 -->
    <form th:action="@{/admin/post/postList/search}" method="get">
        <!-- Search Category -->
        <select name="category">
            <option value="pNo">게시글 번호</option>
            <option value="mId">작성자 ID</option>
            <option value="mNickName">작성자 별명</option>
            <option value="bName">게시판</option>
            <option value="pTitle">제목</option>
        </select>

        <input type="text" name="query" placeholder="검색">

        <button type="submit">검색</button>
        <a th:href="@{/admin/post/postList/all}">전체보기</a>
    </form>7


</main>
</html>